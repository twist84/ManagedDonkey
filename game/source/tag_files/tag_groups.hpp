#pragma once

#include "cseries/cseries.hpp"
#include "tag_files/string_ids.hpp"
#include "tag_files/tag_group_definitions.hpp"

#define ACHIEVEMENTS_TAG 'achi'
#define AI_DIALOGUE_GLOBALS_TAG 'adlg'
#define AI_GLOBALS_TAG 'aigl'
#define AI_MISSION_DIALOGUE_TAG 'mdlg'
#define ANTENNA_TAG 'ant!'
#define AREA_SCREEN_EFFECT_TAG 'sefc'
#define ARMOR_SOUNDS_TAG 'arms'
#define BEAM_SYSTEM_TAG 'beam'
#define BINK_TAG 'bink'
#define BIPED_TAG 'bipd'
#define BITMAP_TAG 'bitm'
#define BREAKABLE_SURFACE_TAG 'bsdt'
#define CACHE_FILE_GLOBAL_TAGS_TAG 'cfgt'
#define CACHE_FILE_RESOURCE_GESTALT_TAG 'zone'
#define CACHE_FILE_SOUND_TAG '$#! '
#define CAMERA_FX_SETTINGS_TAG 'cfxs'
#define CAMERA_TRACK_TAG 'trak'
#define CAMO_TAG 'cmoe'
#define CELLULAR_AUTOMATA2D_TAG 'whip'
#define CELLULAR_AUTOMATA_TAG 'devo'
#define CHARACTER_TAG 'char'
#define CHOCOLATE_MOUNTAIN_NEW_TAG 'chmt'
#define CHUD_ANIMATION_DEFINITION_TAG 'chad'
#define CHUD_DEFINITION_TAG 'chdt'
#define CHUD_GLOBALS_DEFINITION_TAG 'chgd'
#define CHUD_WIDGET_PARALLAX_DATA_TAG 'cprl'
#define CINEMATIC_SCENE_TAG 'cisc'
#define CINEMATIC_TAG 'cine'
#define CLOTH_TAG 'clwd'
#define COLLISION_DAMAGE_TAG 'cddf'
#define COLLISION_MODEL_TAG 'coll'
#define COLOR_TABLE_TAG 'colo'
#define CONTRAIL_SYSTEM_TAG 'cntl'
#define CORTANA_EFFECT_DEFINITION_TAG 'crte'
#define CRATE_TAG 'bloc'
#define CREATURE_TAG 'crea'
#define DAMAGE_EFFECT_TAG 'jpt!'
#define DAMAGE_RESPONSE_DEFINITION_TAG 'drdf'
#define DECAL_SYSTEM_TAG 'decs'
#define DECORATOR_SET_TAG 'dctr'
#define DETAIL_OBJECT_COLLECTION_TAG 'dobc'
#define DEVICE_ARG_DEVICE_TAG 'argd'
#define DEVICE_CONTROL_TAG 'ctrl'
#define DEVICE_MACHINE_TAG 'mach'
#define DEVICE_TAG 'devi'
#define DEVICE_TERMINAL_TAG 'term'
#define DIALOGUE_TAG 'udlg'
#define EFFECT_GLOBALS_TAG 'effg'
#define EFFECT_SCENERY_TAG 'efsc'
#define EFFECT_TAG 'effe'
#define EQUIPMENT_TAG 'eqip'
#define FLOCK_TAG 'flck'
#define FLUID_DYNAMICS_TAG 'fldy'
#define FORMATION_TAG 'form'
#define FRAGMENT_TAG 'frag'
#define GAME_ENGINE_SETTINGS_DEFINITION_TAG 'wezr'
#define GAME_PROGRESSION_TAG 'gpdt'
#define GFX_TEXTURES_LIST_TAG 'gfxt'
#define GIANT_TAG 'gint'
#define GLOBALS_TAG 'matg'
#define GLOBAL_PIXEL_SHADER_TAG 'glps'
#define GLOBAL_VERTEX_SHADER_TAG 'glvs'
#define GUI_BITMAP_WIDGET_DEFINITION_TAG 'bmp3'
#define GUI_BUTTON_KEY_DEFINITION_TAG 'bkey'
#define GUI_DATASOURCE_DEFINITION_TAG 'dsrc'
#define GUI_GROUP_WIDGET_DEFINITION_TAG 'grup'
#define GUI_LIST_WIDGET_DEFINITION_TAG 'lst3'
#define GUI_MODEL_WIDGET_DEFINITION_TAG 'mdl3'
#define GUI_SCREEN_WIDGET_DEFINITION_TAG 'scn3'
#define GUI_SKIN_DEFINITION_TAG 'skn3'
#define GUI_TEXT_WIDGET_DEFINITION_TAG 'txt3'
#define GUI_WIDGET_ANIMATION_COLLECTION_DEFINITION_TAG 'wacd'
#define GUI_WIDGET_ANIMATION_DEFINITION_TAG 'wgan'
#define GUI_WIDGET_COLOR_ANIMATION_DEFINITION_TAG 'wclr'
#define GUI_WIDGET_FONT_ANIMATION_DEFINITION_TAG 'wfon'
#define GUI_WIDGET_POSITION_ANIMATION_DEFINITION_TAG 'wpos'
#define GUI_WIDGET_ROTATION_ANIMATION_DEFINITION_TAG 'wrot'
#define GUI_WIDGET_SCALE_ANIMATION_DEFINITION_TAG 'wscl'
#define GUI_WIDGET_SPRITE_ANIMATION_DEFINITION_TAG 'wspr'
#define GUI_WIDGET_TEXTURE_COORDINATE_ANIMATION_DEFINITION_TAG 'wtuv'
#define HLSL_INCLUDE_TAG 'hlsl'
#define INPUT_GLOBALS_TAG 'inpg'
#define ITEM_COLLECTION_TAG 'itmc'
#define ITEM_TAG 'item'
#define LEAF_SYSTEM_TAG 'lswd'
#define LENS_FLARE_TAG 'lens'
#define LIGHT_TAG 'ligh'
#define LIGHT_VOLUME_SYSTEM_TAG 'ltvl'
#define MATERIAL_EFFECTS_TAG 'foot'
#define METER_TAG 'metr'
#define MODEL_ANIMATION_GRAPH_TAG 'jmad'
#define MODEL_TAG 'hlmt'
#define MUFFIN_TAG 'mffn'
#define MULTILINGUAL_UNICODE_STRING_LIST_TAG 'unic'
#define MULTIPLAYER_GLOBALS_TAG 'mulg'
#define MULTIPLAYER_SCENARIO_DESCRIPTION_TAG 'mply'
#define MULTIPLAYER_VARIANT_SETTINGS_INTERFACE_DEFINITION_TAG 'goof'
#define NEW_CINEMATIC_LIGHTING_TAG 'nclt'
#define OBJECT_TAG 'obje'
#define PARTICLE_EMITTER_CUSTOM_POINTS_TAG 'pecp'
#define PARTICLE_MODEL_TAG 'pmdf'
#define PARTICLE_PHYSICS_TAG 'pmov'
#define PARTICLE_TAG 'prt3'
#define PATCHY_FOG_TAG 'fpch'
#define PERFORMANCE_THROTTLES_TAG 'perf'
#define PHYSICS_MODEL_TAG 'phmo'
#define PIXEL_SHADER_TAG 'pixl'
#define PLANAR_FOG_TAG 'fog '
#define PODIUM_SETTINGS_TAG 'pdm!'
#define POINT_PHYSICS_TAG 'pphy'
#define PROJECTILE_TAG 'proj'
#define RASTERIZER_CACHE_FILE_GLOBALS_TAG 'draw'
#define RASTERIZER_GLOBALS_TAG 'rasg'
#define RENDER_METHOD_DEFINITION_TAG 'rmdf'
#define RENDER_METHOD_OPTION_TAG 'rmop'
#define RENDER_METHOD_TAG 'rm  '
#define RENDER_METHOD_TEMPLATE_TAG 'rmt2'
#define RENDER_MODEL_TAG 'mode'
#define RENDER_WATER_RIPPLE_TAG 'rwrd'
#define SANDBOX_TEXT_VALUE_PAIR_DEFINITION_TAG 'jmrq'
#define SCENARIO_AI_RESOURCE_TAG 'ai**'
#define SCENARIO_BIPEDS_RESOURCE_TAG '*ipd'
#define SCENARIO_CINEMATICS_RESOURCE_TAG 'cin*'
#define SCENARIO_CLUSTER_DATA_RESOURCE_TAG 'clu*'
#define SCENARIO_COMMENTS_RESOURCE_TAG '/**/'
#define SCENARIO_CREATURE_RESOURCE_TAG '*rea'
#define SCENARIO_CUBEMAP_RESOURCE_TAG 'cub*'
#define SCENARIO_DECALS_RESOURCE_TAG 'dec*'
#define SCENARIO_DECORATORS_RESOURCE_TAG 'dc*s'
#define SCENARIO_DEVICES_RESOURCE_TAG 'dgr*'
#define SCENARIO_EFFECT_SCENERY_RESOURCE_TAG '*fsc'
#define SCENARIO_EQUIPMENT_RESOURCE_TAG '*qip'
#define SCENARIO_FAUX_DATA_TAG 'sFdT'
#define SCENARIO_HS_SOURCE_FILE_TAG 'hsc*'
#define SCENARIO_LIGHTMAP_BSP_DATA_TAG 'Lbsp'
#define SCENARIO_LIGHTMAP_TAG 'sLdT'
#define SCENARIO_LIGHTS_RESOURCE_TAG '*igh'
#define SCENARIO_PDA_TAG 'spda'
#define SCENARIO_SCENERY_RESOURCE_TAG '*cen'
#define SCENARIO_SKY_REFERENCES_RESOURCE_TAG 'sky*'
#define SCENARIO_SOUND_SCENERY_RESOURCE_TAG '*sce'
#define SCENARIO_STRUCTURE_BSP_TAG 'sbsp'
#define SCENARIO_STRUCTURE_LIGHTING_INFO_TAG 'stli'
#define SCENARIO_STRUCTURE_LIGHTING_RESOURCE_TAG 'sslt'
#define SCENARIO_TAG 'scnr'
#define SCENARIO_TRIGGER_VOLUMES_RESOURCE_TAG 'trg*'
#define SCENARIO_VEHICLES_RESOURCE_TAG '*ehi'
#define SCENARIO_WEAPONS_RESOURCE_TAG '*eap'
#define SCENERY_TAG 'scen'
#define SCREEN_EFFECT_TAG 'egor'
#define SHADER_BEAM_TAG 'rmb '
#define SHADER_BLACK_TAG 'rmbk'
#define SHADER_CONTRAIL_TAG 'rmc\0'
#define SHADER_CORTANA_TAG 'rmct'
#define SHADER_CUSTOM_TAG 'rmcs'
#define SHADER_DECAL_TAG 'rmd '
#define SHADER_FOLIAGE_TAG 'rmfl'
#define SHADER_HALOGRAM_TAG 'rmhg'
#define SHADER_LIGHT_VOLUME_TAG 'rmlv'
#define SHADER_PARTICLE_TAG 'rmp\0'
#define SHADER_SCREEN_TAG 'rmss'
#define SHADER_SKIN_TAG 'rmsk'
#define SHADER_TAG 'rmsh'
#define SHADER_TERRAIN_TAG 'rmtr'
#define SHADER_WATER_TAG 'rmw '
#define SHADER_ZONLY_TAG 'rmzo'
#define SHIELD_IMPACT_TAG 'shit'
#define SKY_ATM_PARAMETERS_TAG 'skya'
#define SOUND_CACHE_FILE_GESTALT_TAG 'ugh!'
#define SOUND_CLASSES_TAG 'sncl'
#define SOUND_DIALOGUE_CONSTANTS_TAG 'spk!'
#define SOUND_EFFECT_COLLECTION_TAG 'sfx+'
#define SOUND_EFFECT_TEMPLATE_TAG '<fx>'
#define SOUND_ENVIRONMENT_TAG 'snde'
#define SOUND_GLOBAL_PROPAGATION_TAG 'sgp!'
#define SOUND_LOOPING_TAG 'lsnd'
#define SOUND_MIX_TAG 'snmx'
#define SOUND_SCENERY_TAG 'ssce'
#define SOUND_TAG 'snd!'
#define SOUND_UI_SOUNDS_TAG 'sus!'
#define SQUAD_TEMPLATE_TAG 'sqtm'
#define STEREO_SYSTEM_TAG 'BooM'
#define STRUCTURE_DESIGN_TAG 'sddt'
#define STRUCTURE_SEAMS_TAG 'stse'
#define STYLE_TAG 'styl'
#define SURVIVAL_MODE_GLOBALS_TAG 'smdt'
#define TAG_TEMPLATE_UNIT_TEST_TAG 'uttt'
#define TEST_TAG_TAG 'ttag'
#define TEXTURE_RENDER_LIST_TAG 'trdf'
#define TEXT_VALUE_PAIR_DEFINITION_TAG 'sily'
#define UNIT_TAG 'unit'
#define USER_INTERFACE_FOURTH_WALL_TIMING_DEFINITION_TAG 'fwtg'
#define USER_INTERFACE_GLOBALS_DEFINITION_TAG 'wgtz'
#define USER_INTERFACE_SHARED_GLOBALS_DEFINITION_TAG 'wigl'
#define USER_INTERFACE_SOUNDS_DEFINITION_TAG 'uise'
#define VEHICLE_COLLECTION_TAG 'vehc'
#define VEHICLE_TAG 'vehi'
#define VERTEX_SHADER_TAG 'vtsh'
#define VFILES_LIST_TAG 'vfsl'
#define VISION_MODE_TAG 'vmdx'
#define WEAPON_TAG 'weap'
#define WIND_TAG 'wind'

extern bool const print_reference_updates;

#define UPDATE_REFERENCE_NAME(_reference) { _reference.get_name(); if (_reference.name) { if (print_reference_updates) c_console::write_line("\t%s: '%s.%s'", #_reference, _reference.name, _reference.get_group_name()); } }
#define UPDATE_BLOCK_REFERENCE_NAMES(_block) { for (long i = 0; i < _block.count(); i++) { if (print_reference_updates) c_console::write_line("\t%s[%d]:", #_block, i); auto& _element = _block[i]; _element.update_reference_names(); } }
#define UPDATE_STRUCT_REFERENCE_NAMES(_struct) { if (print_reference_updates) c_console::write_line("\t%s: ", #_struct); _struct.update_reference_names(); }
#define UPDATE_STRUCT_POINTER_REFERENCE_NAMES(_struct) { if (print_reference_updates) c_console::write_line("\t%s: ", #_struct); _struct->update_reference_names(); }

long const k_tag_file_name_length = 256;

struct s_tag_block
{
	long count;
	union
	{
		void* address;
		byte* base;
	};
	long : 32; // byte* definition;
};
static_assert(sizeof(s_tag_block) == 0xC);

struct s_tag_reference
{
	tag group_tag = tag(NONE);
	char const* name;
	long name_length;
	long index = NONE;

	void* get_definition();

	template<typename t_type>
	t_type* cast_to()
	{
		return static_cast<t_type*>(get_definition());
	}

	char const* get_name();
	char const* get_group_name();
};
static_assert(sizeof(s_tag_reference) == 0x10);

struct s_tag_data
{
	long size;
	long : 32; //  flags;
	long : 32; // long stream_position;
	union
	{
		void* address;
		byte* base;
	};
	long : 32; // byte* definition;
};
static_assert(sizeof(s_tag_data) == 0x14);

template<typename t_element_type, dword ...t_extra>
//using c_typed_tag_block = s_tag_block;
struct c_typed_tag_block :
	s_tag_block
{
public:
	long count() const
	{
		return s_tag_block::count;
	}

	t_element_type* begin()
	{
		return static_cast<t_element_type*>(address);
	}

	t_element_type const* begin() const
	{
		return static_cast<t_element_type*>(address);
	}

	t_element_type* end()
	{
		return static_cast<t_element_type*>(address) + s_tag_block::count;
	}

	t_element_type const* end() const
	{
		return static_cast<t_element_type*>(address) + s_tag_block::count;
	}

	t_element_type& operator[](long index)
	{
		ASSERT(VALID_INDEX(index, s_tag_block::count));

		return static_cast<t_element_type*>(address)[index];
	}

	t_element_type& operator[](long index) const
	{
		ASSERT(VALID_INDEX(index, s_tag_block::count));

		return static_cast<t_element_type*>(address)[index];
	}

	void clear()
	{
		csmemset(address, 0, sizeof(t_element_type) * s_tag_block::count);
		s_tag_block::count = 0;
	}
};

template<tag ...k_group_tags>
using c_typed_tag_reference = s_tag_reference;

template<typename t_data_type, dword ...t_extra>
//using c_typed_tag_data = s_tag_data;
struct c_typed_tag_data :
	s_tag_data
{
	t_data_type* get()
	{
		return reinterpret_cast<t_data_type*>(base);
	}
};

struct s_cache_file_tag_group
{
	tag group_tags[3];
	c_string_id name;

	bool is_group(tag group_tag)
	{
		return group_tag == group_tags[0] || group_tag == group_tags[1] || group_tag == group_tags[2];
	}

	bool operator==(tag group_tag)
	{
		return is_group(group_tag);
	}

	bool operator!=(tag group_tag)
	{
		return !is_group(group_tag);
	}
};
static_assert(sizeof(s_cache_file_tag_group) == 0x10);

extern void* __cdecl tag_block_get_element_with_size(s_tag_block const* block, long index, long size);
extern void* __cdecl tag_data_get_pointer(s_tag_data const* data, long offset, long size);
extern void __cdecl tag_load_missing_tags_report();
extern char const* __cdecl tag_name_strip_path(char const* path);
extern wchar_t const* __cdecl tag_name_strip_path(wchar_t const* path);
extern tag group_name_to_group_tag(char const* group_name);
extern void tag_reference_set(s_tag_reference* reference, tag group_tag, char const* name);
extern void tag_block_set_elements(s_tag_block* block, void* elements);
extern void tag_block_set_element_count(s_tag_block* block, long count);

static s_cache_file_tag_group global_tag_groups[] =
{
	{
		.group_tags = { ACHIEVEMENTS_TAG },
		.name = STRING_ID(global, achievements)
	},
	{
		.group_tags = { AI_DIALOGUE_GLOBALS_TAG },
		.name = STRING_ID(global, ai_dialogue_globals)
	},
	{
		.group_tags = { AI_GLOBALS_TAG },
		.name = STRING_ID(global, ai_globals)
	},
	{
		.group_tags = { AI_MISSION_DIALOGUE_TAG },
		.name = STRING_ID(global, ai_mission_dialogue)
	},
	{
		.group_tags = { ANTENNA_TAG },
		.name = STRING_ID(global, antenna)
	},
	{
		.group_tags = { AREA_SCREEN_EFFECT_TAG },
		.name = STRING_ID(global, area_screen_effect)
	},
	{
		.group_tags = { ARMOR_SOUNDS_TAG },
		.name = STRING_ID(global, armor_sounds)
	},
	{
		.group_tags = { BEAM_SYSTEM_TAG },
		.name = STRING_ID(global, beam_system)
	},
	{
		.group_tags = { BINK_TAG },
		.name = STRING_ID(global, bink)
	},
	{
		.group_tags = { BIPED_TAG, UNIT_TAG, OBJECT_TAG },
		.name = STRING_ID(global, biped)
	},
	{
		.group_tags = { BITMAP_TAG },
		.name = STRING_ID(global, bitmap)
	},
	{
		.group_tags = { BREAKABLE_SURFACE_TAG },
		.name = STRING_ID(global, breakable_surface)
	},
	{
		.group_tags = { CACHE_FILE_GLOBAL_TAGS_TAG },
		.name = STRING_ID(global, cache_file_global_tags)
	},
	{
		.group_tags = { CACHE_FILE_RESOURCE_GESTALT_TAG },
		.name = STRING_ID(global, cache_file_resource_gestalt)
	},
	{
		.group_tags = { CACHE_FILE_SOUND_TAG },
		.name = STRING_ID(global, cache_file_sound)
	},
	{
		.group_tags = { CAMERA_FX_SETTINGS_TAG },
		.name = STRING_ID(global, camera_fx_settings)
	},
	{
		.group_tags = { CAMERA_TRACK_TAG },
		.name = STRING_ID(global, camera_track)
	},
	{
		.group_tags = { CAMO_TAG },
		.name = STRING_ID(global, camo)
	},
	{
		.group_tags = { CELLULAR_AUTOMATA2D_TAG },
		.name = STRING_ID(global, cellular_automata2d)
	},
	{
		.group_tags = { CELLULAR_AUTOMATA_TAG },
		.name = STRING_ID(global, cellular_automata)
	},
	{
		.group_tags = { CHARACTER_TAG },
		.name = STRING_ID(global, character)
	},
	{
		.group_tags = { CHOCOLATE_MOUNTAIN_NEW_TAG },
		.name = STRING_ID(global, chocolate_mountain_new)
	},
	{
		.group_tags = { CHUD_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, chud_animation_definition)
	},
	{
		.group_tags = { CHUD_DEFINITION_TAG },
		.name = STRING_ID(global, chud_definition)
	},
	{
		.group_tags = { CHUD_GLOBALS_DEFINITION_TAG },
		.name = STRING_ID(global, chud_globals_definition)
	},
	{
		.group_tags = { CHUD_WIDGET_PARALLAX_DATA_TAG },
		.name = STRING_ID(global, chud_widget_parallax_data)
	},
	{
		.group_tags = { CINEMATIC_SCENE_TAG },
		.name = STRING_ID(global, cinematic_scene)
	},
	{
		.group_tags = { CINEMATIC_TAG },
		.name = STRING_ID(global, cinematic)
	},
	{
		.group_tags = { CLOTH_TAG },
		.name = STRING_ID(global, cloth)
	},
	{
		.group_tags = { COLLISION_DAMAGE_TAG },
		.name = STRING_ID(global, collision_damage)
	},
	{
		.group_tags = { COLLISION_MODEL_TAG },
		.name = STRING_ID(global, collision_model)
	},
	{
		.group_tags = { COLOR_TABLE_TAG },
		.name = STRING_ID(global, color_table)
	},
	{
		.group_tags = { CONTRAIL_SYSTEM_TAG },
		.name = STRING_ID(global, contrail_system)
	},
	{
		.group_tags = { CORTANA_EFFECT_DEFINITION_TAG },
		.name = STRING_ID(global, cortana_effect_definition)
	},
	{
		.group_tags = { CRATE_TAG },
		.name = STRING_ID(global, crate)
	},
	{
		.group_tags = { CREATURE_TAG },
		.name = STRING_ID(global, creature)
	},
	{
		.group_tags = { DAMAGE_EFFECT_TAG },
		.name = STRING_ID(global, damage_effect)
	},
	{
		.group_tags = { DAMAGE_RESPONSE_DEFINITION_TAG },
		.name = STRING_ID(global, damage_response_definition)
	},
	{
		.group_tags = { DECAL_SYSTEM_TAG },
		.name = STRING_ID(global, decal_system)
	},
	{
		.group_tags = { DECORATOR_SET_TAG },
		.name = STRING_ID(global, decorator_set)
	},
	{
		.group_tags = { DETAIL_OBJECT_COLLECTION_TAG },
		.name = STRING_ID(global, detail_object_collection)
	},
	{
		.group_tags = { DEVICE_ARG_DEVICE_TAG },
		.name = STRING_ID(global, device_arg_device)
	},
	{
		.group_tags = { DEVICE_CONTROL_TAG },
		.name = STRING_ID(global, device_control)
	},
	{
		.group_tags = { DEVICE_MACHINE_TAG },
		.name = STRING_ID(global, device_machine)
	},
	{
		.group_tags = { DEVICE_TAG },
		.name = STRING_ID(global, device)
	},
	{
		.group_tags = { DEVICE_TERMINAL_TAG },
		.name = STRING_ID(global, device_terminal)
	},
	{
		.group_tags = { DIALOGUE_TAG },
		.name = STRING_ID(global, dialogue)
	},
	{
		.group_tags = { EFFECT_GLOBALS_TAG },
		.name = STRING_ID(global, effect_globals)
	},
	{
		.group_tags = { EFFECT_SCENERY_TAG },
		.name = STRING_ID(global, effect_scenery)
	},
	{
		.group_tags = { EFFECT_TAG },
		.name = STRING_ID(global, effect)
	},
	{
		.group_tags = { EQUIPMENT_TAG },
		.name = STRING_ID(global, equipment)
	},
	{
		.group_tags = { FLOCK_TAG },
		.name = STRING_ID(global, flock)
	},
	{
		.group_tags = { FLUID_DYNAMICS_TAG },
		.name = STRING_ID(global, fluid_dynamics)
	},
	{
		.group_tags = { FORMATION_TAG },
		.name = STRING_ID(global, formation)
	},
	{
		.group_tags = { FRAGMENT_TAG },
		.name = STRING_ID(global, fragment)
	},
	{
		.group_tags = { GAME_ENGINE_SETTINGS_DEFINITION_TAG },
		.name = STRING_ID(global, game_engine_settings_definition)
	},
	{
		.group_tags = { GAME_PROGRESSION_TAG },
		.name = STRING_ID(global, game_progression)
	},
	{
		.group_tags = { GFX_TEXTURES_LIST_TAG },
		.name = STRING_ID(global, gfx_textures_list)
	},
	{
		.group_tags = { GIANT_TAG },
		.name = STRING_ID(global, giant)
	},
	{
		.group_tags = { GLOBALS_TAG },
		.name = STRING_ID(global, globals)
	},
	{
		.group_tags = { GLOBAL_PIXEL_SHADER_TAG },
		.name = STRING_ID(global, global_pixel_shader)
	},
	{
		.group_tags = { GLOBAL_VERTEX_SHADER_TAG },
		.name = STRING_ID(global, global_vertex_shader)
	},
	{
		.group_tags = { GUI_BITMAP_WIDGET_DEFINITION_TAG },
		.name = STRING_ID(global, gui_bitmap_widget_definition)
	},
	{
		.group_tags = { GUI_BUTTON_KEY_DEFINITION_TAG },
		.name = STRING_ID(global, gui_button_key_definition)
	},
	{
		.group_tags = { GUI_DATASOURCE_DEFINITION_TAG },
		.name = STRING_ID(global, gui_datasource_definition)
	},
	{
		.group_tags = { GUI_GROUP_WIDGET_DEFINITION_TAG },
		.name = STRING_ID(global, gui_group_widget_definition)
	},
	{
		.group_tags = { GUI_LIST_WIDGET_DEFINITION_TAG },
		.name = STRING_ID(global, gui_list_widget_definition)
	},
	{
		.group_tags = { GUI_MODEL_WIDGET_DEFINITION_TAG },
		.name = STRING_ID(global, gui_model_widget_definition)
	},
	{
		.group_tags = { GUI_SCREEN_WIDGET_DEFINITION_TAG },
		.name = STRING_ID(global, gui_screen_widget_definition)
	},
	{
		.group_tags = { GUI_SKIN_DEFINITION_TAG },
		.name = STRING_ID(global, gui_skin_definition)
	},
	{
		.group_tags = { GUI_TEXT_WIDGET_DEFINITION_TAG },
		.name = STRING_ID(global, gui_text_widget_definition)
	},
	{
		.group_tags = { GUI_WIDGET_ANIMATION_COLLECTION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_animation_collection_definition)
	},
	{
		.group_tags = { GUI_WIDGET_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_COLOR_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_color_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_FONT_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_font_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_POSITION_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_position_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_ROTATION_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_rotation_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_SCALE_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_scale_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_SPRITE_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_sprite_animation_definition)
	},
	{
		.group_tags = { GUI_WIDGET_TEXTURE_COORDINATE_ANIMATION_DEFINITION_TAG },
		.name = STRING_ID(global, gui_widget_texture_coordinate_animation_definition)
	},
	{
		.group_tags = { HLSL_INCLUDE_TAG },
		.name = STRING_ID(global, hlsl_include)
	},
	{
		.group_tags = { INPUT_GLOBALS_TAG },
		.name = STRING_ID(global, input_globals)
	},
	{
		.group_tags = { ITEM_COLLECTION_TAG },
		.name = STRING_ID(global, item_collection)
	},
	{
		.group_tags = { ITEM_TAG, OBJECT_TAG },
		.name = STRING_ID(global, item)
	},
	{
		.group_tags = { LEAF_SYSTEM_TAG },
		.name = STRING_ID(global, leaf_system)
	},
	{
		.group_tags = { LENS_FLARE_TAG },
		.name = STRING_ID(global, lens_flare)
	},
	{
		.group_tags = { LIGHT_TAG },
		.name = STRING_ID(global, light)
	},
	{
		.group_tags = { LIGHT_VOLUME_SYSTEM_TAG },
		.name = STRING_ID(global, light_volume_system)
	},
	{
		.group_tags = { MATERIAL_EFFECTS_TAG },
		.name = STRING_ID(global, material_effects)
	},
	{
		.group_tags = { METER_TAG },
		.name = STRING_ID(global, meter)
	},
	{
		.group_tags = { MODEL_ANIMATION_GRAPH_TAG },
		.name = STRING_ID(global, model_animation_graph)
	},
	{
		.group_tags = { MODEL_TAG },
		.name = STRING_ID(global, model)
	},
	{
		.group_tags = { MUFFIN_TAG },
		.name = STRING_ID(global, muffin)
	},
	{
		.group_tags = { MULTILINGUAL_UNICODE_STRING_LIST_TAG },
		.name = STRING_ID(global, multilingual_unicode_string_list)
	},
	{
		.group_tags = { MULTIPLAYER_GLOBALS_TAG },
		.name = STRING_ID(global, multiplayer_globals)
	},
	{
		.group_tags = { MULTIPLAYER_SCENARIO_DESCRIPTION_TAG },
		.name = STRING_ID(global, multiplayer_scenario_description)
	},
	{
		.group_tags = { MULTIPLAYER_VARIANT_SETTINGS_INTERFACE_DEFINITION_TAG },
		.name = STRING_ID(global, multiplayer_variant_settings_interface_definition)
	},
	{
		.group_tags = { NEW_CINEMATIC_LIGHTING_TAG },
		.name = STRING_ID(global, new_cinematic_lighting)
	},
	{
		.group_tags = { OBJECT_TAG },
		.name = STRING_ID(global, object)
	},
	{
		.group_tags = { PARTICLE_EMITTER_CUSTOM_POINTS_TAG },
		.name = STRING_ID(global, particle_emitter_custom_points)
	},
	{
		.group_tags = { PARTICLE_MODEL_TAG },
		.name = STRING_ID(global, particle_model)
	},
	{
		.group_tags = { PARTICLE_PHYSICS_TAG },
		.name = STRING_ID(global, particle_physics)
	},
	{
		.group_tags = { PARTICLE_TAG },
		.name = STRING_ID(global, particle)
	},
	{
		.group_tags = { PATCHY_FOG_TAG },
		.name = STRING_ID(global, patchy_fog)
	},
	{
		.group_tags = { PERFORMANCE_THROTTLES_TAG },
		.name = STRING_ID(global, performance_throttles)
	},
	{
		.group_tags = { PHYSICS_MODEL_TAG },
		.name = STRING_ID(global, physics_model)
	},
	{
		.group_tags = { PIXEL_SHADER_TAG },
		.name = STRING_ID(global, pixel_shader)
	},
	{
		.group_tags = { PLANAR_FOG_TAG },
		.name = STRING_ID(global, planar_fog)
	},
	{
		.group_tags = { PODIUM_SETTINGS_TAG },
		.name = STRING_ID(global, podium_settings)
	},
	{
		.group_tags = { POINT_PHYSICS_TAG },
		.name = STRING_ID(global, point_physics)
	},
	{
		.group_tags = { PROJECTILE_TAG },
		.name = STRING_ID(global, projectile)
	},
	{
		.group_tags = { RASTERIZER_CACHE_FILE_GLOBALS_TAG },
		.name = STRING_ID(global, rasterizer_cache_file_globals)
	},
	{
		.group_tags = { RASTERIZER_GLOBALS_TAG },
		.name = STRING_ID(global, rasterizer_globals)
	},
	{
		.group_tags = { RENDER_METHOD_DEFINITION_TAG },
		.name = STRING_ID(global, render_method_definition)
	},
	{
		.group_tags = { RENDER_METHOD_OPTION_TAG },
		.name = STRING_ID(global, render_method_option)
	},
	{
		.group_tags = { RENDER_METHOD_TAG },
		.name = STRING_ID(global, render_method)
	},
	{
		.group_tags = { RENDER_METHOD_TEMPLATE_TAG },
		.name = STRING_ID(global, render_method_template)
	},
	{
		.group_tags = { RENDER_MODEL_TAG },
		.name = STRING_ID(global, render_model)
	},
	{
		.group_tags = { RENDER_WATER_RIPPLE_TAG },
		.name = STRING_ID(global, render_water_ripple)
	},
	{
		.group_tags = { SANDBOX_TEXT_VALUE_PAIR_DEFINITION_TAG },
		.name = STRING_ID(global, sandbox_text_value_pair_definition)
	},
	{
		.group_tags = { SCENARIO_AI_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_ai_resource)
	},
	{
		.group_tags = { SCENARIO_BIPEDS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_bipeds_resource)
	},
	{
		.group_tags = { SCENARIO_CINEMATICS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_cinematics_resource)
	},
	{
		.group_tags = { SCENARIO_CLUSTER_DATA_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_cluster_data_resource)
	},
	{
		.group_tags = { SCENARIO_COMMENTS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_comments_resource)
	},
	{
		.group_tags = { SCENARIO_CREATURE_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_creature_resource)
	},
	{
		.group_tags = { SCENARIO_CUBEMAP_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_cubemap_resource)
	},
	{
		.group_tags = { SCENARIO_DECALS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_decals_resource)
	},
	{
		.group_tags = { SCENARIO_DECORATORS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_decorators_resource)
	},
	{
		.group_tags = { SCENARIO_DEVICES_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_devices_resource)
	},
	{
		.group_tags = { SCENARIO_EFFECT_SCENERY_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_effect_scenery_resource)
	},
	{
		.group_tags = { SCENARIO_EQUIPMENT_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_equipment_resource)
	},
	{
		.group_tags = { SCENARIO_FAUX_DATA_TAG },
		.name = STRING_ID(global, scenario_faux_data)
	},
	{
		.group_tags = { SCENARIO_HS_SOURCE_FILE_TAG },
		.name = STRING_ID(global, scenario_hs_source_file)
	},
	{
		.group_tags = { SCENARIO_LIGHTMAP_BSP_DATA_TAG },
		.name = STRING_ID(global, scenario_lightmap_bsp_data)
	},
	{
		.group_tags = { SCENARIO_LIGHTMAP_TAG },
		.name = STRING_ID(global, scenario_lightmap)
	},
	{
		.group_tags = { SCENARIO_LIGHTS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_lights_resource)
	},
	{
		.group_tags = { SCENARIO_PDA_TAG },
		.name = STRING_ID(global, scenario_pda)
	},
	{
		.group_tags = { SCENARIO_SCENERY_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_scenery_resource)
	},
	{
		.group_tags = { SCENARIO_SKY_REFERENCES_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_sky_references_resource)
	},
	{
		.group_tags = { SCENARIO_SOUND_SCENERY_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_sound_scenery_resource)
	},
	{
		.group_tags = { SCENARIO_STRUCTURE_BSP_TAG },
		.name = STRING_ID(global, scenario_structure_bsp)
	},
	{
		.group_tags = { SCENARIO_STRUCTURE_LIGHTING_INFO_TAG },
		.name = STRING_ID(global, scenario_structure_lighting_info)
	},
	{
		.group_tags = { SCENARIO_STRUCTURE_LIGHTING_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_structure_lighting_resource)
	},
	{
		.group_tags = { SCENARIO_TAG },
		.name = STRING_ID(global, scenario)
	},
	{
		.group_tags = { SCENARIO_TRIGGER_VOLUMES_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_trigger_volumes_resource)
	},
	{
		.group_tags = { SCENARIO_VEHICLES_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_vehicles_resource)
	},
	{
		.group_tags = { SCENARIO_WEAPONS_RESOURCE_TAG },
		.name = STRING_ID(global, scenario_weapons_resource)
	},
	{
		.group_tags = { SCENERY_TAG },
		.name = STRING_ID(global, scenery)
	},
	{
		.group_tags = { SCREEN_EFFECT_TAG },
		.name = STRING_ID(global, screen_effect)
	},
	{
		.group_tags = { SHADER_BEAM_TAG },
		.name = STRING_ID(global, shader_beam)
	},
	{
		.group_tags = { SHADER_BLACK_TAG },
		.name = STRING_ID(global, shader_black)
	},
	{
		.group_tags = { SHADER_CONTRAIL_TAG },
		.name = STRING_ID(global, shader_contrail)
	},
	{
		.group_tags = { SHADER_CORTANA_TAG },
		.name = STRING_ID(global, shader_cortana)
	},
	{
		.group_tags = { SHADER_CUSTOM_TAG },
		.name = STRING_ID(global, shader_custom)
	},
	{
		.group_tags = { SHADER_DECAL_TAG },
		.name = STRING_ID(global, shader_decal)
	},
	{
		.group_tags = { SHADER_FOLIAGE_TAG },
		.name = STRING_ID(global, shader_foliage)
	},
	{
		.group_tags = { SHADER_HALOGRAM_TAG },
		.name = STRING_ID(global, shader_halogram)
	},
	{
		.group_tags = { SHADER_LIGHT_VOLUME_TAG },
		.name = STRING_ID(global, shader_light_volume)
	},
	{
		.group_tags = { SHADER_PARTICLE_TAG },
		.name = STRING_ID(global, shader_particle)
	},
	{
		.group_tags = { SHADER_SCREEN_TAG },
		.name = STRING_ID(global, shader_screen)
	},
	{
		.group_tags = { SHADER_SKIN_TAG },
		.name = STRING_ID(global, shader_skin)
	},
	{
		.group_tags = { SHADER_TAG },
		.name = STRING_ID(global, shader)
	},
	{
		.group_tags = { SHADER_TERRAIN_TAG },
		.name = STRING_ID(global, shader_terrain)
	},
	{
		.group_tags = { SHADER_WATER_TAG },
		.name = STRING_ID(global, shader_water)
	},
	{
		.group_tags = { SHADER_ZONLY_TAG },
		.name = STRING_ID(global, shader_zonly)
	},
	{
		.group_tags = { SHIELD_IMPACT_TAG },
		.name = STRING_ID(global, shield_impact)
	},
	{
		.group_tags = { SKY_ATM_PARAMETERS_TAG },
		.name = STRING_ID(global, sky_atm_parameters)
	},
	{
		.group_tags = { SOUND_CACHE_FILE_GESTALT_TAG },
		.name = STRING_ID(global, sound_cache_file_gestalt)
	},
	{
		.group_tags = { SOUND_CLASSES_TAG },
		.name = STRING_ID(global, sound_classes)
	},
	{
		.group_tags = { SOUND_DIALOGUE_CONSTANTS_TAG },
		.name = STRING_ID(global, sound_dialogue_constants)
	},
	{
		.group_tags = { SOUND_EFFECT_COLLECTION_TAG },
		.name = STRING_ID(global, sound_effect_collection)
	},
	{
		.group_tags = { SOUND_EFFECT_TEMPLATE_TAG },
		.name = STRING_ID(global, sound_effect_template)
	},
	{
		.group_tags = { SOUND_ENVIRONMENT_TAG },
		.name = STRING_ID(global, sound_environment)
	},
	{
		.group_tags = { SOUND_GLOBAL_PROPAGATION_TAG },
		.name = STRING_ID(global, sound_global_propagation)
	},
	{
		.group_tags = { SOUND_LOOPING_TAG },
		.name = STRING_ID(global, sound_looping)
	},
	{
		.group_tags = { SOUND_MIX_TAG },
		.name = STRING_ID(global, sound_mix)
	},
	{
		.group_tags = { SOUND_SCENERY_TAG },
		.name = STRING_ID(global, sound_scenery)
	},
	{
		.group_tags = { SOUND_TAG },
		.name = STRING_ID(global, sound)
	},
	{
		.group_tags = { SOUND_UI_SOUNDS_TAG },
		.name = STRING_ID(global, sound_ui_sounds)
	},
	{
		.group_tags = { SQUAD_TEMPLATE_TAG },
		.name = STRING_ID(global, squad_template)
	},
	{
		.group_tags = { STEREO_SYSTEM_TAG },
		.name = STRING_ID(global, stereo_system)
	},
	{
		.group_tags = { STRUCTURE_DESIGN_TAG },
		.name = STRING_ID(global, structure_design)
	},
	{
		.group_tags = { STRUCTURE_SEAMS_TAG },
		.name = STRING_ID(global, structure_seams)
	},
	{
		.group_tags = { STYLE_TAG },
		.name = STRING_ID(global, style)
	},
	{
		.group_tags = { SURVIVAL_MODE_GLOBALS_TAG },
		.name = STRING_ID(global, survival_mode_globals)
	},
	{
		.group_tags = { TAG_TEMPLATE_UNIT_TEST_TAG },
		.name = STRING_ID(global, tag_template_unit_test)
	},
	{
		.group_tags = { TEST_TAG_TAG },
		.name = STRING_ID(global, test_tag)
	},
	{
		.group_tags = { TEXTURE_RENDER_LIST_TAG },
		.name = STRING_ID(global, texture_render_list)
	},
	{
		.group_tags = { TEXT_VALUE_PAIR_DEFINITION_TAG },
		.name = STRING_ID(global, text_value_pair_definition)
	},
	{
		.group_tags = { UNIT_TAG, OBJECT_TAG },
		.name = STRING_ID(global, unit)
	},
	{
		.group_tags = { USER_INTERFACE_FOURTH_WALL_TIMING_DEFINITION_TAG },
		.name = STRING_ID(global, user_interface_fourth_wall_timing_definition)
	},
	{
		.group_tags = { USER_INTERFACE_GLOBALS_DEFINITION_TAG },
		.name = STRING_ID(global, user_interface_globals_definition)
	},
	{
		.group_tags = { USER_INTERFACE_SHARED_GLOBALS_DEFINITION_TAG },
		.name = STRING_ID(global, user_interface_shared_globals_definition)
	},
	{
		.group_tags = { USER_INTERFACE_SOUNDS_DEFINITION_TAG },
		.name = STRING_ID(global, user_interface_sounds_definition)
	},
	{
		.group_tags = { VEHICLE_COLLECTION_TAG },
		.name = STRING_ID(global, vehicle_collection)
	},
	{
		.group_tags = { VEHICLE_TAG, UNIT_TAG, OBJECT_TAG },
		.name = STRING_ID(global, vehicle)
	},
	{
		.group_tags = { VERTEX_SHADER_TAG },
		.name = STRING_ID(global, vertex_shader)
	},
	{
		.group_tags = { VFILES_LIST_TAG },
		.name = STRING_ID(global, vfiles_list)
	},
	{
		.group_tags = { VISION_MODE_TAG },
		.name = STRING_ID(global, vision_mode)
	},
	{
		.group_tags = { WEAPON_TAG, ITEM_TAG, OBJECT_TAG },
		.name = STRING_ID(global, weapon)
	},
	{
		.group_tags = { WIND_TAG },
		.name = STRING_ID(global, wind)
	},
};
static long const global_tag_group_count = NUMBEROF(global_tag_groups);

